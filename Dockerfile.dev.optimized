# Optimized Development Dockerfile for Frontend (with hot reload)
# Improvements:
# - Uses npm ci for reproducible builds
# - Build cache mounts
# - Copies source files (works standalone, overridden by volumes)

FROM node:20-alpine

WORKDIR /app

# Copy package files
COPY package.json package-lock.json* ./

# Install dependencies with cache mount
RUN --mount=type=cache,target=/root/.npm \
    npm ci

# Copy config files
COPY tsconfig*.json vite.config.ts tailwind.config.ts postcss.config.js components.json ./

# Copy source files (will be overridden by volume mounts in dev, but ensures container works standalone)
COPY src ./src
COPY public ./public
COPY index.html ./

# Expose Vite dev server port
EXPOSE 5173

# Start Vite dev server with host binding
CMD ["npm", "run", "dev", "--", "--host"]
